{% extends 'base_admin.html.twig' %}

{% block body %}


<nav class="border-b-1 border-gray-100 sticky  shadow-sm z-20 top-0 start-0 ">

		<ul class="flex justify-center items-center h-12 text-sm md:text-md">
			<li class="mr-3">
				<a class="inline-block  py-2 px-3 text-orange-500" href="{{ path('app_listing')}}">Liste des listings</a>
			</li>
			<li class="mr-3">
				<a class="inline-block  py-2 px-3 text-orange-500" href="{{ path('app_listing_add')}}">Ajouter un listing</a>
			</li>

		</ul>
	</nav>

<blockquote class="text-2xl font-semibold italic text-center text-slate-900 mb-10 mt-10">
				Fiche du listing
				<span class="before:block before:absolute before:-inset-1 before:-skew-y-3 before:bg-[#FA7127] relative inline-block ">
					<span class="relative text-white">{{listing.name | raw }}</span>
				</span>
				
			</blockquote>
	<div class="flex w-full justify-center items-center h-full mt-6 mb-10">

		<div class="px-4  w-full md:w-6/12 bg-white p-6 shadow-xl rounded-lg mx-2">
			

			
			

			

			<div class="flex  flex-col md:flex-row w-full gap-4 ">
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline ">Nom du listing</p>
					<p class="text-md text-gray-900 mb-2  font-bold  text-lg ">{{listing.name | upper | raw}}</p>					
				</div>
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Province</p>
					<p class="text-md text-gray-900 mb-2  font-bold  text-lg">{{listing.ville.province.nom | upper | raw}}</p>
					
				</div>
			</div>
			<div class="flex  flex-col md:flex-row w-full gap-4 ">
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Latitude</p>
					<p class="text-md text-gray-900 mb-2  font-bold  text-lg">{{listing.ville.latitude | upper | raw}}</p>					
				</div>
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center " data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Longitude</p>
					<p class="text-md text-gray-900 mb-2  font-bold  text-lg">{{listing.ville.longitude | upper | raw}}</p>
					
				</div>
			</div>
			<div class="flex  flex-col md:flex-row w-full gap-4 ">
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Localité</p>
					<p class="text-md text-gray-900 mb-2  font-bold  text-lg">{{listing.ville.nom | upper | raw}}</p>					
				</div>
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Catégorie</p>
					<p class="text-md text-gray-900 mb-2  font-bold  text-lg">{{listing.categorie.nom | upper | raw}}</p>
					
				</div>
			</div>

			<div class="flex  flex-col md:flex-row  w-full gap-4">
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Adresse Email</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.email  | raw}}</p>
					
				</div>
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Type de pension</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.pension != null ? listing.pension.nom  | upper | raw : "-"}}</p>
					
				</div>
			</div>

			<div class="flex  flex-col md:flex-row w-full gap-4">
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Adresse</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.adresse  | raw}}</p>
				
				</div>
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">nb Couverts</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg" >{{listing.nbCouverts | upper | raw}}</p>
				</div>
			</div>
			<div class="flex  flex-col md:flex-row w-full gap-4">


				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">nb Chambres</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.nbChambre | upper | raw}}</p>
					
				</div>
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">nb Lits</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.nbLit | upper | raw}}</p>
					
				</div>
			</div>
			<div class="flex  flex-col md:flex-row w-full gap-4">
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Site web</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.siteweb | raw}}</p>
				
				</div>

				<div class="relative mb-4  w-full md:w-[50%] flex flex-row gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Téléphone</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.telephone | upper | raw}}</p>
					
				</div>
			</div>


			<div class="relative mb-4 flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
				<p class="text-md text-gray-900 mb-2 underline">Description</p>
				<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.description | upper | raw}}</p>
				
			</div>
			<div class="flex  flex-col md:flex-row w-full gap-4">
				<div class="relative mb-4  w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">facebook</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.facebook | upper | raw}}</p>
					
				</div>
				<div class="relative mb-4  w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Instagram</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.instagram | upper | raw}}</p>
				
				</div>
			</div>
			<div class="flex  flex-col md:flex-row w-full gap-4">
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Tiktok</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.tiktok | upper | raw}}</p>
					
				</div>
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Twitter</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.twitter | upper | raw}}</p>
				</div>
			</div>
			<div class="flex  flex-col md:flex-row w-full gap-4">
				<div class="relative mb-4 w-full md:w-[50%] flex flex-col gap-4 justify-start items-center" data-te-input-wrapper-init>
					<p class="text-md text-gray-900 mb-2 underline">Youtube</p>
					<p class="text-md text-gray-900 mb-2 font-bold  text-lg">{{listing.youtube | upper | raw}}</p>
		
				</div>
				
			</div>

			
			{% if images != null %}


				<div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10">
					{% for image in images %}
						{% set link = "template/uploads/" ~ image.chemin %}

						<div class="flex flex-col gap-4" id="image{{image.id}}">
							<img class="h-auto max-w-full rounded-lg" src="{{ asset(link) }}" alt="">
							<a href="javascript:;" class="text-gray-900 hover:text-[#FF9119] underline" onclick="delete_image({{image.id}})">Supprimer</a>
						</div>
					{% endfor %}
				</div>
			{% endif %}
		</div>
	</div>


{% endblock %}
{% block javascripts %}
	{{ parent()}}
	<script src="{{asset('template/js/jquery.min.js')}}"  crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	<script>
		function delete_image(id) {
			var divid = "#image"+id;
			$.ajax({
										url: '/listing/image/delete/'+id,
										
										type: "POST",
											success: function (response) {
												
											console.log(response)	
											 $(divid).fadeOut(1000, function () {
												$(this).remove();
											});

												
											},
											error: function(jqXHR, textStatus, errorThrown) {
											alert(jqXHR.textStatus);
											}
										});
		}
	</script>
{% endblock %}
